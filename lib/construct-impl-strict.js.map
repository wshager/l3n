{"version":3,"sources":["../src/construct-impl-strict.js"],"names":["_n","_a","_v","_dt","type","name","children","len","length","Array","isArray","parent","ref","parentIsCx","__vnode_context","node","vnode","create","depth","reduce","c","modify","child","val","qname","publicId","systemId"],"mappings":";;;;;QAQgBA,E,GAAAA,E;QAwBAC,E,GAAAA,E;QAUAC,E,GAAAA,E;QAWAC,G,GAAAA,G;;AArDhB;;AAEA;;AAEA;;AAEA;;;;;;AAEO,SAASH,EAAT,CAAYI,IAAZ,EAAkBC,IAAlB,EAAwBC,QAAxB,EAAkC;AACxC,OAAMC,MAAMD,SAASE,MAArB;AACA;AACA,KAAGD,OAAO,CAAV,EAAa;AACZ,MAAG,wBAAaD,SAAS,CAAT,CAAb,CAAH,EAA8B,OAAO,gCAAIF,IAAJ,EAASC,IAAT,EAAcC,SAAS,CAAT,CAAd,CAAP;AAC9B,MAAGG,MAAMC,OAAN,CAAcJ,SAAS,CAAT,CAAd,CAAH,EAA+BA,WAAWA,SAAS,CAAT,CAAX;AAC/B;AACD,QAAO,yBAAM,UAAUK,MAAV,EAAkBC,GAAlB,EAAuB;AACnC;;;;;;;;;AASA,QAAMC,aAAaF,OAAOG,eAA1B;AACA;AACA,MAAIC,OAAOJ,OAAOK,KAAP,CAAaL,OAAOM,MAAP,CAAcb,IAAd,EAAoBC,IAApB,CAAb,EAAwCQ,aAAa,IAAb,GAAoBF,MAA5D,EAAoEE,aAAa,CAAb,GAAiBF,OAAOO,KAAP,GAAe,CAApG,EAAuG,CAAvG,EAA0Gd,IAA1G,CAAX;AACA,SAAOE,SAASa,MAAT,CAAgB,CAACJ,IAAD,EAAMK,CAAN,KAAYL,KAAKM,MAAL,CAAY,oBAAQD,CAAR,IAAa,OAAOA,EAAEL,IAAT,IAAiB,UAAjB,GAA8BK,EAAEL,IAAF,CAAOA,IAAP,CAA9B,GAA6CK,CAA1D,GAA8DlB,GAAG,CAAH,EAAKkB,IAAE,EAAP,EAAWL,IAAX,CAAgBA,IAAhB,CAA1E,EAAgGH,GAAhG,CAA5B,EAAiIG,IAAjI,CAAP;AACA,EAdM,EAcJX,IAdI,EAcEC,IAdF,CAAP;AAeA;;AAEM,SAASJ,EAAT,CAAYI,IAAZ,EAAkBiB,KAAlB,EAAyB;AAC/B,KAAG,wBAAaA,KAAb,CAAH,EAAwB,OAAO,gCAAIjB,IAAJ,EAASiB,KAAT,CAAP;AACxB,QAAO,yBAAMX,UAAU;AACtB;AACA,MAAII,OAAOJ,OAAOK,KAAP,CAAaL,OAAOM,MAAP,CAAc,CAAd,EAAgBZ,IAAhB,CAAb,EAAoCM,MAApC,CAAX;AACA;AACA,SAAOI,KAAKM,MAAL,CAAY,oBAAQC,KAAR,IAAiB,OAAOA,MAAMP,IAAb,IAAqB,UAArB,GAAkCO,MAAMP,IAAN,CAAWA,IAAX,CAAlC,GAAqDO,KAAtE,GAA8EpB,GAAG,CAAH,EAAKoB,QAAM,EAAX,EAAeP,IAAf,CAAoBA,IAApB,CAA1F,CAAP;AACA,EALM,EAKJ,CALI,EAKDV,IALC,CAAP;AAMA;;AAEM,SAASH,EAAT,CAAYE,IAAZ,EAAkBmB,GAAlB,EAAuB;AAC7B,KAAG,wBAAaA,GAAb,CAAH,EAAsB,OAAO,gCAAInB,IAAJ,EAASmB,GAAT,CAAP;AACtB,QAAO;AACN;AACAZ,WAAUA,OAAOK,KAAP,CAAaL,OAAOM,MAAP,CAAcb,IAAd,EAAmBmB,GAAnB,CAAb,EAAsCZ,MAAtC,CAFJ,EAGNP,IAHM,EAIN,IAJM,EAKNmB,GALM,CAAP;AAOA;;AAEM,SAASpB,GAAT,CAAaqB,KAAb,EAAmBC,QAAnB,EAA4BC,QAA5B,EAAsC;AAC5C,QAAO,yBAAMf,UAAUA,OAAOK,KAAP,CAAaL,OAAOM,MAAP,CAAc,EAAd,EAAiB,EAACO,OAAMA,KAAP,EAAaC,UAASA,QAAtB,EAA+BC,UAASA,QAAxC,EAAjB,CAAb,EAAiFf,MAAjF,EAAwF,CAAxF,EAA0F,CAA1F,CAAhB,EAA6G,EAA7G,CAAP;AACA","file":"construct-impl-strict.js","sourcesContent":["import { isVNode } from \"./vnode\";\r\n\r\nimport { isObservable } from \"rxjs\";\r\n\r\nimport { _n as _n2, _a as _a2, _v as _v2 } from \"./construct-impl-streaming\";\r\n\r\nimport vnode from \"./faux-vnode\";\r\n\r\nexport function _n(type, name, children) {\r\n\tconst len = children.length;\r\n\t// if there's only one \"children\" argument it could be an Array\r\n\tif(len == 1) {\r\n\t\tif(isObservable(children[0])) return _n2(type,name,children[0]);\r\n\t\tif(Array.isArray(children[0])) children = children[0];\r\n\t}\r\n\treturn vnode(function (parent, ref) {\r\n\t\t/*var ns;\r\n\t\tif (type == 1) {\r\n\t\t\tif (isQName(name)) {\r\n\t\t\t\tns = name;\r\n\t\t\t\tname = name.name;\r\n\t\t\t} else if (/:/.test(name)) {\r\n\t\t\t\t// TODO where are the namespaces?\r\n\t\t\t}\r\n\t\t}*/\r\n\t\tconst parentIsCx = parent.__vnode_context;\r\n\t\t// convert to real VNode instance\r\n\t\tvar node = parent.vnode(parent.create(type, name), parentIsCx ? null : parent, parentIsCx ? 0 : parent.depth + 1, 0, type);\r\n\t\treturn children.reduce((node,c) => node.modify(isVNode(c) ? typeof c.node == \"function\" ? c.node(node) : c : _v(3,c+\"\").node(node),ref),node);\r\n\t}, type, name);\r\n}\r\n\r\nexport function _a(name, child) {\r\n\tif(isObservable(child)) return _a2(name,child);\r\n\treturn vnode(parent => {\r\n\t\t// provide a provisional entry in the parent (without a value)\r\n\t\tvar node = parent.vnode(parent.create(2,name), parent);\r\n\t\t// node is an attr node /w child as $val\r\n\t\treturn node.modify(isVNode(child) ? typeof child.node == \"function\" ? child.node(node) : child : _v(3,child+\"\").node(node));\r\n\t}, 2, name);\r\n}\r\n\r\nexport function _v(type, val) {\r\n\tif(isObservable(val)) return _v2(type,val);\r\n\treturn vnode(\r\n\t\t// set by type, not by key (for attrs the keys are already filled in by pair)\r\n\t\tparent => parent.vnode(parent.create(type,val), parent),\r\n\t\ttype,\r\n\t\tnull,\r\n\t\tval\r\n\t);\r\n}\r\n\r\nexport function _dt(qname,publicId,systemId) {\r\n\treturn vnode(parent => parent.vnode(parent.create(10,{qname:qname,publicId:publicId,systemId:systemId}),parent,1,0),10);\r\n}\r\n"]}